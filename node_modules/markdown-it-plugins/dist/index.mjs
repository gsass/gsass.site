import MarkdownContainer from"markdown-it-container";function container(n){const r=/(tip|warning|danger|details)\s?(.*)/;let s;n.use(MarkdownContainer,"container",{validate:e=>e.trim().match(r),render(e,t){return 1===e[t].nesting?([,e,t]=e[t].info.trim().match(r),s=e,t=t,"details"===(e=e)?'<details class="prompt-container details">'+(t?`<summary class="prompt-container-title">${n.utils.escapeHtml(t)}</summary>`:""):`<div class="prompt-container ${e}"><p class="prompt-container-title">${n.utils.escapeHtml(t)}</p>`):"details"===s?"</details>":"</div>"}})}function noticeboard(e){const l="?> ";e.block.ruler.before("paragraph","noticeboard",(r,s,e,i)=>{if(4<=r.sCount[s]-r.blkIndent)return!1;var t=r.eMarks[s],n=r.bMarks[s]+r.tShift[s];const o=r.src.substring(n,t).trim();if(o.startsWith(l)||o.startsWith("!> ")){if(i)return!0;let e,t,n;return n=o.startsWith(l)?(t="tip",l):(t="danger","!> "),(e=r.push("notice_open","div",1)).attrs=[["class","noticeboard "+t]],e.markup=n,e.map=[s,r.line],(e=r.push("inline","",0)).map=[s,r.line],e.content=o.substring(l.length),e.children=[],(e=r.push("notice_close","div",-1)).markup=n,r.line=s+1,!0}return!1})}function codeLineNumbers(e){const r=e.renderer.rules.fence;e.renderer.rules.fence=(e,t,...n)=>{return`
      <ul class="code-line-numbers">
        ${([...new Array(e[t].content.split("\n").length).keys()].join('</li><li class="line">')+"</li>").slice(6)}
      </ul>
      ${r(e,t,...n)}
    `}}function collectBlockCode(e,{lang:o=!0,copy:l=!1,open:a=!0,copyText:c="Copy",separator:d=":",blockName:p=!1}={}){const u=e.renderer.rules.fence;let m,b;e.renderer.rules.fence=(e,t,...n)=>{var[r,s,i]=e[t].info.split(d).map(e=>e.trim());return b=i?"close"===i?"":"open"===i?"open":i:a?"open":"",m=`<details class="collect-block-code" ${b?"open":""}><summary class="collect-block-trigger"><i class="block-code-icon"></i>`+(p&&s?`<p class="block-code-name">${s}</p>`:'<i style="flex:1"></i>'),(l||p)&&(m+=(o?`<span class="block-code-lang">${r}</span>`:"")+(l?`<button class="copy-code-btn">${c}</button>`:"")),m+=`</summary><div class="collect-block-content">${u(e,t,...n)}</div></details>`}}function extendImageTitle(e){const o=e.renderer.rules.image;e.renderer.rules.image=(e,t,...n)=>{const r=e[t];var s=r.attrs?.findIndex(([e])=>"title"===e);if(s&&0<=s&&~r.attrs[s][1].indexOf("=")){let t,n;const i=r.attrs[s][1].split("&");r.attrSet("title",""),r.attrSet("loading","lazy"),i.forEach(e=>{[t,n]=e.split("="),r.attrSet(t,n)})}return o(e,t,...n)}}export{codeLineNumbers,collectBlockCode,container,extendImageTitle,noticeboard};